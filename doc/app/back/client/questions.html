<!DOCTYPE html><html lang="en"><head><title>app/back/client/questions</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="app/back/client/questions"><meta name="groc-project-path" content="app/back/client/questions.coffee"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">app/back/client/questions.coffee</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="back-client-side-question-mgmt">Back client-side question mgmt</h1></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>React to answer deletion buttons by removing the table row for it.
As all answers are inlined in the host question form, it will get
properly deleted when the host form is submitted.</p></div></div><div class="code"><div class="wrapper"><span class="nv">deleteAnswerClientSide = </span><span class="nf">(e) -&gt;</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">()</span>

  <span class="nv">row = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s">&#39;tr&#39;</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">row</span>
  <span class="nx">row</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;input[name*=&quot;text&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span> <span class="s">&#39;&#39;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Hook answer deletion buttons (through event delegation) for client-side
removal UX.</p></div></div><div class="code"><div class="wrapper"><span class="nv">initQuestionsBack = </span><span class="nf">-&gt;</span>
  <span class="p">(</span><span class="nx">$</span> <span class="s">&#39;#answers&#39;</span><span class="p">).</span><span class="nx">on</span> <span class="s">&#39;click&#39;</span><span class="p">,</span> <span class="s">&#39;a[data-action=&quot;remove&quot;]&#39;</span><span class="p">,</span> <span class="nx">deleteAnswerClientSide</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This feels so CLI! :-D</p></div></div><div class="code"><div class="wrapper"><span class="nx">$</span> <span class="nx">initQuestionsBack</span></div></div></div></div></body></html>